{"ast":null,"code":"var _jsxFileName = \"/home/node/app/src/App.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useState } from \"react\";\nimport NavBar from './NavBar.jsx';\nimport Chat from './Chat.jsx';\nimport MainFrame from './mainFrame.jsx';\nimport { useMediaQuery } from 'react-responsive';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar mySource;\nvar socket;\nvar xhr;\nexport function setMySource(source) {\n  mySource = source;\n}\nfunction WebSite() {\n  _s();\n  const [page, setPage] = useState('Home');\n  const [game, setGame] = useState('pong');\n  const [myProfile, setMyProfile] = useState(undefined);\n  const [opponent, setOpponent] = useState(undefined);\n  const [profileId, setProfileId] = useState(0);\n  const [tournamentId, setTournamentId] = useState(0);\n  const [initialSet, setInitialSet] = useState(false);\n  const [chanTag, setChanTag] = useState('lobby');\n  const [chanName, setChanName] = useState('general');\n  const [chats, setChats] = useState([{\n    tag: 'lobby',\n    name: 'general',\n    autoScroll: true,\n    messages: [{\n      type: \"whisp\",\n      target: 1,\n      name: \"Roronoa Zoro\",\n      id: 3,\n      text: \"Yo ! Ca boume?\"\n    }, {\n      type: \"message\",\n      target: 'lobby',\n      name: \"Trafalgar Law\",\n      id: 2,\n      text: \"Salut...\"\n    }]\n  }]);\n  const [creds, setCreds] = useState(undefined);\n  const [muted, setMuted] = useState([]);\n  const sm = useMediaQuery({\n    query: '(min-width: 481px)'\n  });\n  const md = useMediaQuery({\n    query: '(min-width: 769px)'\n  });\n  const xlg = useMediaQuery({\n    query: '(min-width: 1201px)'\n  });\n  const xxlg = useMediaQuery({\n    query: '(min-width: 1350px)'\n  });\n  const xxxlg = useMediaQuery({\n    query: '(min-width: 1824px)'\n  });\n  const [settings, setSettings] = useState({\n    game: '',\n    scope: 'remote',\n    device: 'keyboard',\n    queue: 0,\n    spectate: true,\n    challengeable: true\n  });\n  const customwindow = {\n    backgroundColor: '#ced4da',\n    overflow: 'auto',\n    height: xlg ? '75%' : '95%',\n    width: xlg ? '75%' : '95%',\n    padding: '10px 20px'\n  };\n  let props = {\n    page,\n    setPage,\n    game,\n    setGame,\n    settings,\n    setSettings,\n    myProfile,\n    setMyProfile,\n    opponent,\n    setOpponent,\n    profileId,\n    setProfileId,\n    tournamentId,\n    setTournamentId,\n    chanTag,\n    setChanTag,\n    chanName,\n    setChanName,\n    chats,\n    setChats,\n    creds,\n    setCreds,\n    muted,\n    setMuted,\n    sm,\n    md,\n    xlg,\n    xxlg,\n    xxxlg,\n    customwindow\n  };\n  if (!initialSet) {\n    socket = new WebSocket('ws://chat/');\n    // socket.onerror = () => setChats(chats.map(chat => { return {...chat, messages : [...chat.messages, {type : 'error'}]} }))\n    socket.onmessage = e => {\n      const receivedMessage = JSON.parse(e.data);\n      setChats(chats.map(chat => {\n        if (receivedMessage.type === 'whisp' || receivedMessage.type === 'admin' || chats.find(chat => chat.name === receivedMessage.target) && receivedMessage.target === chat.name) return {\n          ...chat,\n          messages: [...chat.messages, receivedMessage]\n        };else return chat;\n      }));\n    };\n    var tmp = {\n      name: localStorage.getItem('ft_transcendenceLogin'),\n      password: localStorage.getItem('ft_transcendencePassword')\n    };\n    // if (tmp.name) {\n    xhr = new XMLHttpRequest();\n    xhr.logForm = tmp;\n    // xhr.open('GET', '/authenticate/sign_in/', true, xhr.logForm.name, xhr.logForm.password)\n    xhr.open('GET', '/aapi/user/' + 1 + '.json');\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 3) {\n        setCreds(xhr.logForm);\n        let response = JSON.parse(xhr.response);\n        mySource = new EventSource('/api/user/' + response + '/');\n        mySource.onmessage = e => setMyProfile(e.data);\n        setMyProfile(response);\n      }\n    };\n    xhr.send();\n    // }\n    setInitialSet(true);\n  }\n  const chat = /*#__PURE__*/_jsxDEV(Chat, {\n    props: props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 15\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      props: props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 6\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-grow-1\",\n      style: {\n        maxHeight: 'calc(100vh - 50px)'\n      },\n      children: [xlg && chat, /*#__PURE__*/_jsxDEV(MainFrame, {\n        props: props,\n        chat: chat\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 8\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 6\n    }, this)]\n  }, void 0, true);\n}\n_s(WebSite, \"DgjFE7FLyTSPjVo3K3510KyOplw=\", false, function () {\n  return [useMediaQuery, useMediaQuery, useMediaQuery, useMediaQuery, useMediaQuery];\n});\n_c = WebSite;\nexport default WebSite;\nvar _c;\n$RefreshReg$(_c, \"WebSite\");","map":{"version":3,"names":["React","useState","NavBar","Chat","MainFrame","useMediaQuery","jsxDEV","_jsxDEV","Fragment","_Fragment","mySource","socket","xhr","setMySource","source","WebSite","_s","page","setPage","game","setGame","myProfile","setMyProfile","undefined","opponent","setOpponent","profileId","setProfileId","tournamentId","setTournamentId","initialSet","setInitialSet","chanTag","setChanTag","chanName","setChanName","chats","setChats","tag","name","autoScroll","messages","type","target","id","text","creds","setCreds","muted","setMuted","sm","query","md","xlg","xxlg","xxxlg","settings","setSettings","scope","device","queue","spectate","challengeable","customwindow","backgroundColor","overflow","height","width","padding","props","WebSocket","onmessage","e","receivedMessage","JSON","parse","data","map","chat","find","tmp","localStorage","getItem","password","XMLHttpRequest","logForm","open","onreadystatechange","readyState","response","EventSource","send","fileName","_jsxFileName","lineNumber","columnNumber","children","className","style","maxHeight","_c","$RefreshReg$"],"sources":["/home/node/app/src/App.jsx"],"sourcesContent":["import React from 'react'\nimport { useState } from \"react\"\nimport NavBar from './NavBar.jsx'\nimport Chat from './Chat.jsx'\nimport MainFrame from './mainFrame.jsx'\nimport { useMediaQuery } from 'react-responsive'\n\nvar mySource\nvar socket\nvar xhr\n\nexport function setMySource(source) {\n\tmySource = source\n}\n\nfunction WebSite() {\n\n\tconst [page, setPage] = useState('Home')\n\tconst [game, setGame] = useState('pong')\n\tconst [myProfile, setMyProfile] = useState(undefined)\n\tconst [opponent, setOpponent] = useState(undefined)\n\tconst [profileId, setProfileId] = useState(0)\n\tconst [tournamentId, setTournamentId] = useState(0)\n\tconst [initialSet, setInitialSet] = useState(false)\n\tconst [chanTag, setChanTag] = useState('lobby')\n\tconst [chanName, setChanName] = useState('general')\n\tconst [chats, setChats] = useState([{tag : 'lobby', name : 'general', autoScroll : true, messages : [\n\t\t{\n\t\t\ttype : \"whisp\",\n\t\t\ttarget : 1,\n\t\t\tname : \"Roronoa Zoro\",\n\t\t\tid : 3,\n\t\t\ttext : \"Yo ! Ca boume?\"\n\t\t},\n\t\t{\n\t\t\ttype : \"message\",\n\t\t\ttarget : 'lobby',\n\t\t\tname : \"Trafalgar Law\",\n\t\t\tid : 2,\n\t\t\ttext : \"Salut...\"\n\t\t}\n\t]}])\n\tconst [creds, setCreds] = useState(undefined)\n\tconst [muted, setMuted] = useState([])\n\tconst sm = useMediaQuery({query: '(min-width: 481px)'})\n\tconst md = useMediaQuery({query: '(min-width: 769px)'})\n\tconst xlg = useMediaQuery({query: '(min-width: 1201px)'})\n\tconst xxlg = useMediaQuery({query: '(min-width: 1350px)'})\n\tconst xxxlg = useMediaQuery({query: '(min-width: 1824px)'})\n\tconst [settings, setSettings] = useState({\n\t\tgame : '',\n\t\tscope : 'remote',\n\t\tdevice : 'keyboard',\n\t\tqueue : 0,\n\t\tspectate : true,\n\t\tchallengeable : true\n\t})\n\tconst customwindow =  {\n        backgroundColor: '#ced4da',\n        overflow: 'auto',\n        height: xlg ? '75%' : '95%',\n        width: xlg ? '75%' : '95%',\n        padding: '10px 20px'\n    }\n\n\tlet props = {\n\t\tpage,\n\t\tsetPage,\n\t\tgame, \n\t\tsetGame,\n\t\tsettings,\n\t\tsetSettings,\n\t\tmyProfile,\n\t\tsetMyProfile,\n\t\topponent,\n\t\tsetOpponent,\n\t\tprofileId,\n\t\tsetProfileId,\n\t\ttournamentId,\n\t\tsetTournamentId,\n\t\tchanTag,\n\t\tsetChanTag,\n\t\tchanName,\n\t\tsetChanName,\n\t\tchats,\n\t\tsetChats,\n\t\tcreds,\n\t\tsetCreds,\n\t\tmuted,\n\t\tsetMuted,\n\t\tsm,\n\t\tmd,\n\t\txlg,\n\t\txxlg,\n\t\txxxlg,\n\t\tcustomwindow\n\t}\n\n\tif (!initialSet) {\n\t\tsocket = new WebSocket('ws://chat/')\n\t\t// socket.onerror = () => setChats(chats.map(chat => { return {...chat, messages : [...chat.messages, {type : 'error'}]} }))\n\t\tsocket.onmessage = (e) => {\n\t\t\tconst receivedMessage = JSON.parse(e.data)\n\t\t\tsetChats(chats.map(chat => {\n\t\t\t\tif (receivedMessage.type === 'whisp' || receivedMessage.type === 'admin' || (chats.find(chat => chat.name === receivedMessage.target) && receivedMessage.target === chat.name))\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...chat,\n\t\t\t\t\t\tmessages : [...chat.messages, receivedMessage]\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn chat\n\t\t\t\t}))\n\t\t}\n\t\t\n\t\tvar tmp = {\n\t\t\tname : localStorage.getItem('ft_transcendenceLogin'),\n\t\t\tpassword : localStorage.getItem('ft_transcendencePassword')\n\t\t}\n\t\t// if (tmp.name) {\n\t\t\txhr = new XMLHttpRequest()\n\t\t\txhr.logForm = tmp\n\t\t\t// xhr.open('GET', '/authenticate/sign_in/', true, xhr.logForm.name, xhr.logForm.password)\n\t\t\txhr.open('GET', '/aapi/user/' + 1 + '.json')\n\t\t\txhr.onreadystatechange = () => {\n\t\t\t\tif (xhr.readyState === 3) {\n\t\t\t\t\tsetCreds(xhr.logForm)\n\t\t\t\t\tlet response = JSON.parse(xhr.response)\n\t\t\t\t\tmySource = new EventSource('/api/user/' + response + '/')\n\t\t\t\t\tmySource.onmessage = (e) => setMyProfile(e.data)\n\t\t\t\t\tsetMyProfile(response)\n\t\t\t\t}\n\t\t\t}\n\t\t\txhr.send()\n\t\t// }\n\t\tsetInitialSet(true)\n\t}\n\n\tconst chat = <Chat props={props} />\n\n  \treturn (\n\t  \t<>\n  \t\t\t<NavBar props={props} />\n  \t\t\t<div className=\"d-flex flex-grow-1\" style={{maxHeight: 'calc(100vh - 50px)'}}>\n  \t\t\t  {xlg && chat}\n  \t\t\t  <MainFrame props={props} chat={chat} />\n  \t\t\t</div>\n\t\t</>\n  \t)\n}\n\nexport default WebSite"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}