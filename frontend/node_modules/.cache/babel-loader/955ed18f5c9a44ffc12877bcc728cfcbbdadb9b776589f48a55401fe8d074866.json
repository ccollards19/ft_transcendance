{"ast":null,"code":"var _jsxFileName = \"/home/node/app/src/Chat.jsx\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Chat({\n  props\n}) {\n  const getWhisp = text => {\n    if (!text[2] || text[2] !== ' ') return undefined;\n    let nameStart = text.indexOf('\"', 3);\n    if (nameStart < 0) return undefined;\n    let nameEnd = text.indexOf('\"', nameStart + 1);\n    if (nameEnd < 0) return undefined;\n    let name = text.substring(nameStart + 1, nameEnd);\n    if (name.trim() === '') return undefined;\n    if (!text[nameEnd + 1] || text[nameEnd + 1] !== ' ') return undefined;\n    let txt = text.substr(nameEnd + 2);\n    if (txt.trim() === '') return undefined;\n    return {\n      type: 'whisp',\n      target: name,\n      myId: props.myProfile.id,\n      name: props.myProfile.name,\n      text: txt\n    };\n  };\n  const isSpecialCommand = text => {\n    let command = text.substr(0, 2);\n    if (command === '/h' || command === '/m' || command === '/b') {\n      if (text[2] && text.substr(2).trim() !== command) props.setChats(props.chats.map(chat => {\n        if (chat.tag === props.chanTag) return {\n          ...chat,\n          messages: [...chat.messages, {\n            type: 'system',\n            text: 'Wrong command. Use : ' + command\n          }]\n        };else return chat;\n      }));else if (command === '/h') props.setChats(props.chats.map(chat => {\n        if (chat.tag === props.chanTag) return {\n          ...chat,\n          messages: [...chat.messages, {\n            type: 'help'\n          }]\n        };else return chat;\n      }));else if (command === '/m') props.setChats(props.chats.map(chat => {\n        if (chat.tag === props.chanTag) return {\n          ...chat,\n          messages: [...chat.messages, {\n            type: 'mute'\n          }]\n        };else return chat;\n      }));else if (command === '/b') props.setChats(props.chats.map(chat => {\n        if (chat.tag === props.chanTag) return {\n          ...chat,\n          messages: [...chat.messages, {\n            type: 'block'\n          }]\n        };else return chat;\n      }));\n      document.getElementById('chatPrompt').value = '';\n      return true;\n    }\n    if (command === '/w') {\n      let message = getWhisp(text);\n      if (!message) {\n        props.setChats(props.chats.map(chat => {\n          if (chat.tag === props.chanTag) return {\n            ...chat,\n            messages: [...chat.messages, {\n              type: 'system',\n              text: 'Wrong command. Use : /w \"[username]\" [message]'\n            }]\n          };else return chat;\n        }));\n        document.getElementById('chatPrompt').value = '';\n      } else {\n        props.setChats(props.chats.map(chat => {\n          return {\n            ...chat,\n            messages: [...chat.messages, {\n              ...message,\n              id: props.myProfile.id\n            }]\n          };\n        }));\n        // console.log(message.target)\n        document.getElementById('chatPrompt').value = '/w \"' + message.target + '\" ';\n      }\n      //sendMessage\n      return true;\n    }\n    return false;\n  };\n  const sendMessage = () => {\n    let prompt = document.getElementById('chatPrompt').value;\n    if (!isSpecialCommand(prompt)) {\n      let message = {\n        type: 'message',\n        target: props.chanTag,\n        myId: props.myProfile.id,\n        name: props.myProfile.name,\n        text: prompt\n      };\n      //sendMessage\n      props.setChats(props.chats.map(chat => {\n        if (chat.tag === props.chanTag) return {\n          ...chat,\n          messages: [...chat.messages, message]\n        };else return chat;\n      }));\n      document.getElementById('chatPrompt').value = '';\n    }\n  };\n  const toggleChan = e => {\n    props.setChanTag(e.target.dataset.tag);\n    props.setChanName(e.target.dataset.name);\n  };\n  const leaveChan = e => {\n    let tag = e.target.dataset.tag;\n    props.setChats(props.chats.filter(chat => chat.tag !== tag));\n    if (props.chanTag === tag) {\n      props.setChanTag('lobby');\n      props.setChanName('general');\n    }\n  };\n  const captureKey = e => e.keyCode === 13 && sendMessage();\n  let chanIndex = 1;\n  let leaveIndex = 1;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `h-100 ${props.xlg ? 'bg-dark-subtle' : 'bg-white'} d-flex flex-column`,\n    style: {\n      width: '300px',\n      maxHeight: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center py-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"nav-link\",\n        \"data-bs-toggle\": \"dropdown\",\n        children: /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"my-0 text-capitalize\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            children: \"#\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 123\n          }, this), \" \", props.chanName, \" \", props.chats.length > 1 && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/images/caret-down-fill.svg\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 176\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 86\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"dropdown-menu\",\n        children: [props.chats.map(chat => /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: toggleChan,\n          \"data-tag\": chat.tag,\n          \"data-name\": chat.name,\n          type: \"button\",\n          className: \"px-2 fw-bold dropdown-item nav-link text-capitalize\",\n          children: chat.name\n        }, chat.tag, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 7\n        }, this)), props.chats.length > 1 && /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"dropdown-divider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 33\n        }, this), props.chats.length > 1 && props.chats.map(chat => /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: leaveChan,\n          \"data-tag\": chat.tag,\n          type: \"button\",\n          className: \"px-2 fw-bold dropdown-item nav-link text-capitalize\",\n          hidden: chat.tag === 'lobby',\n          children: [\"Leave \", chat.name]\n        }, chanIndex++, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 8\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"mx-5 mt-0 mb-2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-2 d-flex flex-column justify-content-end overflow-y-auto flex-grow-1\",\n      style: {\n        maxWidth: '100%'\n      },\n      children: props.chats.map(chat => {\n        return /*#__PURE__*/_jsxDEV(Channel, {\n          props: props,\n          chat: chat\n        }, leaveIndex++, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-100 ps-4 pe-5 pb-3 pt-2 align-self-end\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex gap-3 pt-1 row ps-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group p-0 m-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pt-1 me-2 m-0 border-0\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/images/wechat.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 66\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            onKeyDown: captureKey,\n            type: \"text\",\n            name: \"chatPrompt\",\n            id: \"chatPrompt\",\n            className: `form-control ${props.xlg ? 'border-0' : 'border-1 border-black'} rounded`,\n            placeholder: props.myProfile ? 'Say something nice' : 'Log in to chat',\n            disabled: !props.myProfile || props.chats[0].messages.length > 0 && props.chats[0].messages[props.chats[0].messages.length - 1].type === 'error'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: sendMessage,\n            className: \"pt-1 ms-2 nav-link\",\n            disabled: !props.myProfile || props.chats[0].messages.length > 0 && props.chats[0].messages[props.chats[0].messages.length - 1].type === 'error',\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"/images/send.svg\",\n              alt: \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 234\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 9\n  }, this);\n}\n_c = Chat;\nexport function Channel({\n  props,\n  chat\n}) {\n  const seeProfile = e => {\n    props.setProfileId(parseInt(e.target.dataset.id, 10));\n    props.setPage('Profile');\n  };\n  const directMessage = e => {\n    let prompt = document.getElementById('chatPrompt');\n    prompt.value = '/w '.concat('\"', e.target.dataset.name, '\" ');\n    prompt.focus();\n  };\n  const mute = e => {\n    var request = new XMLHttpRequest();\n    request.responseType = 'json';\n    request.open('POST', '/api/user/' + props.myProfile.id + '/mute/' + e.target.dataset.id, true, props.creds.name, props.creds.password);\n    request.send();\n    request.onload = () => {};\n  };\n  const addFriend = e => {\n    var request = new XMLHttpRequest();\n    request.responseType = 'json';\n    request.open('POST', '/api/user/' + props.myProfile.id + '/addFriend/' + e.target.dataset.id, true, props.creds.name, props.creds.password);\n    request.send();\n    request.onload = () => {};\n  };\n  const unfriend = e => {\n    var request = new XMLHttpRequest();\n    request.responseType = 'json';\n    request.open('POST', '/api/user/' + props.myProfile.id + '/removeFriend/' + e.target.dataset.id, true, props.creds.name, props.creds.password);\n    request.send();\n    request.onload = () => {};\n  };\n  const unScroll = () => props.chats.map(item => {\n    if (item.tag === chat.tag) return {\n      ...item,\n      autoScroll: false\n    };else return item;\n  });\n  const toBottom = () => {\n    document.getElementById(chat.name).scrollTop = document.getElementById(chat.name).scrollHeight;\n    props.chats.map(item => {\n      if (item.tag === chat.tag) return {\n        ...item,\n        autoScroll: true\n      };else return item;\n    });\n  };\n  const createMenu = e => {\n    let id = parseInt(e.target.dataset.id, 10);\n    let xhr = new XMLHttpRequest();\n    xhr.open('GET', '/aapi/user/' + id + '.json');\n    xhr.onreadystatechange = () => {\n      if (xhr.readyState === 3) {\n        let status = JSON.parse(xhr.response).status;\n        let menuIndex = 1;\n        let menu = [/*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"px-2\",\n          children: e.target.dataset.name\n        }, menuIndex++, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(\"hr\", {\n            className: \"dropdown-divider\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 28\n          }, this)\n        }, menuIndex++, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: seeProfile,\n          \"data-id\": id,\n          type: \"button\",\n          className: \"px-2 dropdown-item nav-link\",\n          children: \"See profile\"\n        }, menuIndex++, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 6\n        }, this)];\n        if (props.myProfile) {\n          if (status === 'online') menu.push( /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: directMessage,\n            \"data-name\": e.target.dataset.name,\n            type: \"button\",\n            className: \"px-2 dropdown-item nav-link\",\n            children: \"Direct message\"\n          }, menuIndex++, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 17\n          }, this));\n          menu.push( /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: mute,\n            \"data-id\": id,\n            type: \"button\",\n            className: \"px-2 dropdown-item nav-link\",\n            children: \"Mute\"\n          }, menuIndex++, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 16\n          }, this));\n          if (!props.myProfile.friends.includes(id)) menu.push( /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: addFriend,\n            \"data-id\": id,\n            type: \"button\",\n            className: \"px-2 dropdown-item nav-link\",\n            children: \"Add to friendlist\"\n          }, menuIndex++, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 17\n          }, this));else menu.push( /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: unfriend,\n            \"data-id\": id,\n            type: \"button\",\n            className: \"px-2 dropdown-item nav-link\",\n            children: \"Remove from friendlist\"\n          }, menuIndex++, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 17\n          }, this));\n          if (status === 'online') {\n            if (!props.myProfile['pong'].challenged.includes(id)) menu.push( /*#__PURE__*/_jsxDEV(\"li\", {\n              \"data-id\": id,\n              type: \"button\",\n              className: \"px-2 dropdown-item nav-link\",\n              children: \"Challenge to Pong\"\n            }, menuIndex++, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 18\n            }, this));\n            if (!props.myProfile['chess'].challenged.includes(id)) menu.push( /*#__PURE__*/_jsxDEV(\"li\", {\n              \"data-id\": id,\n              type: \"button\",\n              className: \"px-2 dropdown-item nav-link\",\n              children: \"Challenge to Chess\"\n            }, menuIndex++, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 18\n            }, this));\n          }\n        }\n        // setMenu(menu)\n      }\n      return undefined;\n    };\n    // let menuIndex = 1\n    // let menu = [\n    // \t<li key={menuIndex++} className='px-2'>{e.target.dataset.name}</li>,\n    // \t<li key={menuIndex++}><hr className=\"dropdown-divider\" /></li>,\n    // \t<li key={menuIndex++} onClick={seeProfile} data-id={id} type='button' className='px-2 dropdown-item nav-link'>See profile</li>\n    // ]\n    // if (props.myProfile) {\n    // \tmenu.push(<li onClick={directMessage} key={menuIndex++} data-name={e.target.dataset.name} type='button' className='px-2 dropdown-item nav-link'>Direct message</li>)\n    // \tmenu.push(<li onClick={mute} key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Mute</li>)\n    // \tif (!props.myProfile.friends.includes(id))\n    // \t\tmenu.push(<li onClick={addFriend} key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Add to friendlist</li>)\n    // \telse\n    // \t\tmenu.push(<li onClick={unfriend} key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Remove from friendlist</li>)\n    // \tif (!props.myProfile['pong'].challenged.includes(id))\n    // \t\tmenu.push(<li key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Challenge to Pong</li>)\n    // \tif (!props.myProfile['chess'].challenged.includes(id))\n    // \t\tmenu.push(<li key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Challenge to Chess</li>)\n    // }\n    // setMenu(menu)\n  };\n  if (chat.messages.length > 0 && chat.messages[chat.messages.length - 1].type === 'error') return /*#__PURE__*/_jsxDEV(\"div\", {\n    hidden: props.chanTag !== chat.tag,\n    style: {\n      minHeight: '100%'\n    },\n    className: \"fw-bold fs-3 d-flex align-items-center justify-content-center\",\n    children: \"An error has occured\"\n  }, chat.tag, false, {\n    fileName: _jsxFileName,\n    lineNumber: 268,\n    columnNumber: 3\n  }, this);\n  let index = 1;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onScroll: unScroll,\n      id: chat.tag,\n      className: \"overflow-auto noScrollBar\",\n      hidden: props.chanTag !== chat.tag,\n      style: {\n        maxHeight: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-primary\",\n        children: [\"Welcome on the \", chat.name, \" chan\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 5\n      }, this), chat.messages.map(message => {\n        if ((message.type === 'whisp' || message.type === 'message') && props.myProfile && !props.myProfile.muted.includes(message.id)) return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: createMenu,\n            \"data-id\": message.id,\n            \"data-name\": message.name,\n            type: \"button\",\n            \"data-bs-toggle\": \"dropdown\",\n            className: `nav-link d-inline ${props.myProfile && props.myProfile.id === message.id ? 'text-danger' : 'text-primary'}`,\n            disabled: props.myProfile && props.myProfile.id === message.id,\n            children: [props.myProfile && props.myProfile.id === message.id ? 'You' : message.name, \" \", message.type === 'whisp' && props.myProfile && message.id === props.myProfile.id && ' to ' + message.target]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 8\n          }, this), ' :', \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: message.type === 'whisp' ? '#107553' : '#000000'\n            },\n            children: [\" \", message.text]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"dropdown-menu\",\n            style: {\n              backgroundColor: '#D8D8D8'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 8\n          }, this)]\n        }, index++, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 7\n        }, this);\n        if (message.type === 'system' || message.type === 'admin') return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: message.type === 'system' ? '#FF0000' : '#5E00FF'\n          },\n          children: message.text\n        }, index++, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 14\n        }, this);else return undefined;\n      })]\n    }, chat.tag, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center justify-content-center my-2\",\n      hidden: props.chanName !== chat.name,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: toBottom,\n        type: \"button\",\n        className: \"nav-link\",\n        hidden: props.chanName !== chat.name,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/images/arrow-down-circle.svg\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      className: \"mx-5 mt-0 mb-2\",\n      hidden: props.chanName !== chat.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true);\n}\n_c2 = Channel;\nexport default Chat;\nvar _c, _c2;\n$RefreshReg$(_c, \"Chat\");\n$RefreshReg$(_c2, \"Channel\");","map":{"version":3,"names":["Chat","props","getWhisp","text","undefined","nameStart","indexOf","nameEnd","name","substring","trim","txt","substr","type","target","myId","myProfile","id","isSpecialCommand","command","setChats","chats","map","chat","tag","chanTag","messages","document","getElementById","value","message","sendMessage","prompt","toggleChan","e","setChanTag","dataset","setChanName","leaveChan","filter","captureKey","keyCode","chanIndex","leaveIndex","_jsxDEV","className","xlg","style","width","maxHeight","children","fileName","_jsxFileName","lineNumber","columnNumber","chanName","length","src","alt","onClick","hidden","maxWidth","Channel","onKeyDown","placeholder","disabled","_c","seeProfile","setProfileId","parseInt","setPage","directMessage","concat","focus","mute","request","XMLHttpRequest","responseType","open","creds","password","send","onload","addFriend","unfriend","unScroll","item","autoScroll","toBottom","scrollTop","scrollHeight","createMenu","xhr","onreadystatechange","readyState","status","JSON","parse","response","menuIndex","menu","push","friends","includes","challenged","minHeight","index","_Fragment","onScroll","muted","color","backgroundColor","_c2","$RefreshReg$"],"sources":["/home/node/app/src/Chat.jsx"],"sourcesContent":["function Chat({ props }) {\n\n\tconst getWhisp = (text) => {\n\t\tif (!text[2] || text[2] !== ' ')\n\t\t\treturn undefined\n\t\tlet nameStart = text.indexOf('\"', 3)\n\t\tif (nameStart < 0)\n\t\t\treturn undefined\n\t\tlet nameEnd = text.indexOf('\"', nameStart + 1)\n\t\tif (nameEnd < 0)\n\t\t\treturn undefined\n\t\tlet name = text.substring(nameStart + 1, nameEnd)\n\t\tif (name.trim() === '')\n\t\t\treturn undefined\n\t\tif (!text[nameEnd + 1] || text[nameEnd + 1] !== ' ')\n\t\t\treturn undefined\n\t\tlet txt = text.substr(nameEnd + 2)\n\t\tif (txt.trim() === '')\n\t\t\treturn undefined\n\t\treturn {\n\t\t\ttype : 'whisp',\n\t\t\ttarget : name,\n\t\t\tmyId : props.myProfile.id,\n\t\t\tname : props.myProfile.name,\n\t\t\ttext : txt\n\t\t}\n\t}\n\n\tconst isSpecialCommand = (text) => {\n\t\tlet command = text.substr(0, 2)\n\t\tif (command === '/h' || command === '/m' || command === '/b') {\n\t\t\tif (text[2] && text.substr(2).trim() !== command)\n\t\t\t\tprops.setChats(props.chats.map(chat => {\n\t\t\t\t\tif (chat.tag === props.chanTag)\n\t\t\t\t\t\treturn {...chat, messages : [...chat.messages, {type : 'system', text : 'Wrong command. Use : ' + command}]}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn chat\n\t\t\t\t}))\n\t\t\telse if (command === '/h')\n\t\t\t\tprops.setChats(props.chats.map(chat => {\n\t\t\t\t\tif (chat.tag === props.chanTag)\n\t\t\t\t\t\treturn {...chat, messages : [...chat.messages, {type : 'help'}]}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn chat\n\t\t\t\t}))\n\t\t\telse if (command === '/m')\n\t\t\t\tprops.setChats(props.chats.map(chat => {\n\t\t\t\t\tif (chat.tag === props.chanTag)\n\t\t\t\t\t\treturn {...chat, messages : [...chat.messages, {type : 'mute'}]}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn chat\n\t\t\t\t}))\n\t\t\telse if (command === '/b')\n\t\t\t\tprops.setChats(props.chats.map(chat => {\n\t\t\t\t\tif (chat.tag === props.chanTag)\n\t\t\t\t\t\treturn {...chat, messages : [...chat.messages, {type : 'block'}]}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn chat\n\t\t\t\t}))\n\t\t\tdocument.getElementById('chatPrompt').value = ''\n\t\t\treturn true\n\t\t}\n\t\tif (command === '/w') {\n\t\t\tlet message = getWhisp(text)\n\t\t\tif (!message) {\n\t\t\t\tprops.setChats(props.chats.map(chat => {\n\t\t\t\t\tif (chat.tag === props.chanTag)\n\t\t\t\t\t\treturn {...chat, messages : [...chat.messages, {type : 'system', text : 'Wrong command. Use : /w \"[username]\" [message]'}]}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn chat\n\t\t\t\t}))\n\t\t\t\tdocument.getElementById('chatPrompt').value = ''\n\t\t\t}\n\t\t\telse {\n\t\t\t\tprops.setChats(props.chats.map(chat => { return {...chat, messages : [...chat.messages, {...message, id : props.myProfile.id}]}}))\n\t\t\t\t// console.log(message.target)\n\t\t\t\tdocument.getElementById('chatPrompt').value = '/w \"' + message.target + '\" '\n\t\t\t}\n\t\t\t//sendMessage\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n\n    const sendMessage = () => {\n\t\tlet prompt = document.getElementById('chatPrompt').value\n\t\tif (!isSpecialCommand(prompt)) {\n\t\t\tlet message = {\n\t\t\t\ttype : 'message',\n\t\t\t\ttarget : props.chanTag,\n\t\t\t\tmyId : props.myProfile.id,\n\t\t\t\tname : props.myProfile.name,\n\t\t\t\ttext : prompt\n\t\t\t}\n\t\t\t//sendMessage\n\t\t\tprops.setChats(props.chats.map(chat => {\n\t\t\t\tif (chat.tag === props.chanTag)\n\t\t\t\t\treturn {...chat, messages : [...chat.messages, message]}\n\t\t\t\telse\n\t\t\t\t\treturn chat\n\t\t\t}))\n\t\t\tdocument.getElementById('chatPrompt').value = ''\n\t\t}\n    }\n\n\tconst toggleChan = (e) => {\n\t\tprops.setChanTag(e.target.dataset.tag)\n\t\tprops.setChanName(e.target.dataset.name)\n\t}\n\t\n\tconst leaveChan = (e) => {\n\t\tlet tag = e.target.dataset.tag\n\t\tprops.setChats(props.chats.filter(chat => chat.tag !== tag))\n\t\tif (props.chanTag === tag) {\n\t\t\tprops.setChanTag('lobby')\n\t\t\tprops.setChanName('general')\n\t\t}\n\t}\n    \n\tconst captureKey = (e) => e.keyCode === 13 && sendMessage()\n\n\tlet chanIndex = 1\n\tlet leaveIndex = 1\n\n\treturn (\n        <div className={`h-100 ${props.xlg ? 'bg-dark-subtle' : 'bg-white'} d-flex flex-column`} style={{width: '300px', maxHeight: '100%'}}>\n            <div className=\"d-flex justify-content-center py-2\">\n                <button type='button' className='nav-link' data-bs-toggle='dropdown'><h5 className=\"my-0 text-capitalize\"><i>#</i> {props.chanName} {props.chats.length > 1 && <img src='/images/caret-down-fill.svg' alt='' />}</h5></button>\n\t\t\t\t<ul className='dropdown-menu'>\n\t\t\t\t\t{props.chats.map(chat =>\n\t\t\t\t\t\t<li onClick={toggleChan} key={chat.tag} data-tag={chat.tag} data-name={chat.name} type='button' className='px-2 fw-bold dropdown-item nav-link text-capitalize'>{chat.name}</li>\n\t\t\t\t\t)}\n\t\t\t\t\t{props.chats.length > 1 && <li><hr className=\"dropdown-divider\" /></li>}\n\t\t\t\t\t{props.chats.length > 1 &&\n\t\t\t\t\t\tprops.chats.map(chat =>\n\t\t\t\t\t\t\t<li onClick={leaveChan} key={chanIndex++} data-tag={chat.tag} type='button' className='px-2 fw-bold dropdown-item nav-link text-capitalize' hidden={chat.tag === 'lobby'}>Leave {chat.name}</li>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t</ul>\n            </div>\n            <hr className=\"mx-5 mt-0 mb-2\" />\n            <div className=\"px-2 d-flex flex-column justify-content-end overflow-y-auto flex-grow-1\" style={{maxWidth: '100%'}}>\n\t\t\t\t{props.chats.map(chat => {\n\t\t\t\t\treturn <Channel key={leaveIndex++} props={props} chat={chat} />\n\t\t\t\t})}\n            </div>\n            <div className=\"w-100 ps-4 pe-5 pb-3 pt-2 align-self-end\">\n                <div className=\"d-flex gap-3 pt-1 row ps-3\">\n                    <div className=\"input-group p-0 m-0\">\n                        <span className=\"pt-1 me-2 m-0 border-0\"><img src=\"/images/wechat.svg\" alt=\"\" /></span>\n                        <input onKeyDown={captureKey} type=\"text\" name=\"chatPrompt\" id=\"chatPrompt\" className={`form-control ${props.xlg ? 'border-0' : 'border-1 border-black'} rounded`} placeholder={props.myProfile ? 'Say something nice' : 'Log in to chat'} disabled={!props.myProfile || (props.chats[0].messages.length > 0 && props.chats[0].messages[props.chats[0].messages.length - 1].type === 'error')} />\n                        <button onClick={sendMessage} className=\"pt-1 ms-2 nav-link\" disabled={!props.myProfile || (props.chats[0].messages.length > 0 && props.chats[0].messages[props.chats[0].messages.length - 1].type === 'error')}><img src=\"/images/send.svg\" alt=\"\" /></button>\n                      </div>                              \n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport function Channel({props, chat}) {\n\n\tconst seeProfile = (e) => {\n\t\tprops.setProfileId(parseInt(e.target.dataset.id, 10))\n\t\tprops.setPage('Profile')\n\t}\n\n\tconst directMessage = (e) => {\n        let prompt = document.getElementById('chatPrompt')\n        prompt.value = '/w '.concat('\"', e.target.dataset.name, '\" ')\n        prompt.focus()\n    }\n\n\tconst mute = (e) => {\n\t\tvar request = new XMLHttpRequest()\n\t\trequest.responseType = 'json'\n\t\trequest.open('POST', '/api/user/' + props.myProfile.id + '/mute/' + e.target.dataset.id, true, props.creds.name, props.creds.password)\n\t\trequest.send()\n\t\trequest.onload = () => {}\n\t}\n\n\tconst addFriend = (e) => {\n\t\tvar request = new XMLHttpRequest()\n\t\trequest.responseType = 'json'\n\t\trequest.open('POST', '/api/user/' + props.myProfile.id + '/addFriend/' + e.target.dataset.id, true, props.creds.name, props.creds.password)\n\t\trequest.send()\n\t\trequest.onload = () => {}\n\t}\n\tconst unfriend = (e) => {\n\t\tvar request = new XMLHttpRequest()\n\t\trequest.responseType = 'json'\n\t\trequest.open('POST', '/api/user/' + props.myProfile.id + '/removeFriend/' + e.target.dataset.id, true, props.creds.name, props.creds.password)\n\t\trequest.send()\n\t\trequest.onload = () => {}\n\t}\n\n\tconst unScroll = () => props.chats.map(item => {\n\t\tif (item.tag === chat.tag)\n\t\t\treturn {...item, autoScroll : false}\n\t\telse\n\t\t\treturn item\n\t})\n\n\tconst toBottom = () => {\n\t\tdocument.getElementById(chat.name).scrollTop = document.getElementById(chat.name).scrollHeight\n\t\tprops.chats.map(item => {\n\t\t\tif (item.tag === chat.tag)\n\t\t\t\treturn {...item, autoScroll : true}\n\t\t\telse\n\t\t\t\treturn item\n\t\t})\n\t}\n\n\tconst createMenu = (e) => {\n\t\tlet id = parseInt(e.target.dataset.id, 10)\n\t\tlet xhr = new XMLHttpRequest()\n\t\txhr.open('GET', '/aapi/user/' + id + '.json')\n\t\txhr.onreadystatechange = () => {\n\t\t\tif (xhr.readyState === 3) {\n\t\t\t\tlet status = JSON.parse(xhr.response).status\n\t\t\t\tlet menuIndex = 1\n\t\t\t\tlet menu = [\n\t\t\t\t\t<li key={menuIndex++} className='px-2'>{e.target.dataset.name}</li>,\n\t\t\t\t\t<li key={menuIndex++}><hr className=\"dropdown-divider\" /></li>,\n\t\t\t\t\t<li key={menuIndex++} onClick={seeProfile} data-id={id} type='button' className='px-2 dropdown-item nav-link'>See profile</li>\n\t\t\t\t]\n\t\t\t\tif (props.myProfile) {\n\t\t\t\t\tif (status === 'online')\n\t\t\t\t\t\tmenu.push(<li onClick={directMessage} key={menuIndex++} data-name={e.target.dataset.name} type='button' className='px-2 dropdown-item nav-link'>Direct message</li>)\n\t\t\t\t\tmenu.push(<li onClick={mute} key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Mute</li>)\n\t\t\t\t\tif (!props.myProfile.friends.includes(id))\n\t\t\t\t\t\tmenu.push(<li onClick={addFriend} key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Add to friendlist</li>)\n\t\t\t\t\telse\n\t\t\t\t\t\tmenu.push(<li onClick={unfriend} key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Remove from friendlist</li>)\n\t\t\t\t\tif (status === 'online') {\n\t\t\t\t\t\tif (!props.myProfile['pong'].challenged.includes(id))\n\t\t\t\t\t\t\tmenu.push(<li key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Challenge to Pong</li>)\n\t\t\t\t\t\tif (!props.myProfile['chess'].challenged.includes(id))\n\t\t\t\t\t\t\tmenu.push(<li key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Challenge to Chess</li>)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// setMenu(menu)\n\t\t\t}\n\t\t\treturn undefined\n\t\t}\n\t\t// let menuIndex = 1\n\t\t// let menu = [\n\t\t// \t<li key={menuIndex++} className='px-2'>{e.target.dataset.name}</li>,\n\t\t// \t<li key={menuIndex++}><hr className=\"dropdown-divider\" /></li>,\n\t\t// \t<li key={menuIndex++} onClick={seeProfile} data-id={id} type='button' className='px-2 dropdown-item nav-link'>See profile</li>\n\t\t// ]\n\t\t// if (props.myProfile) {\n\t\t// \tmenu.push(<li onClick={directMessage} key={menuIndex++} data-name={e.target.dataset.name} type='button' className='px-2 dropdown-item nav-link'>Direct message</li>)\n\t\t// \tmenu.push(<li onClick={mute} key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Mute</li>)\n\t\t// \tif (!props.myProfile.friends.includes(id))\n\t\t// \t\tmenu.push(<li onClick={addFriend} key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Add to friendlist</li>)\n\t\t// \telse\n\t\t// \t\tmenu.push(<li onClick={unfriend} key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Remove from friendlist</li>)\n\t\t// \tif (!props.myProfile['pong'].challenged.includes(id))\n\t\t// \t\tmenu.push(<li key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Challenge to Pong</li>)\n\t\t// \tif (!props.myProfile['chess'].challenged.includes(id))\n\t\t// \t\tmenu.push(<li key={menuIndex++} data-id={id} type='button' className='px-2 dropdown-item nav-link'>Challenge to Chess</li>)\n\t\t// }\n\t\t// setMenu(menu)\n\t}\n\n\tif (chat.messages.length > 0 && chat.messages[chat.messages.length - 1].type === 'error')\n\t\treturn (\n\t\t<div key={chat.tag} hidden={props.chanTag !== chat.tag} style={{minHeight: '100%'}} className='fw-bold fs-3 d-flex align-items-center justify-content-center'>\n\t\t\tAn error has occured\n\t\t</div>\n\t\t)\n\n\tlet index = 1\n\n\treturn (\n\t\t<>\n\t\t\t<div onScroll={unScroll} id={chat.tag} key={chat.tag} className='overflow-auto noScrollBar' hidden={props.chanTag !== chat.tag} style={{maxHeight: '100%'}}>\n\t\t\t\t<span className='text-primary'>Welcome on the {chat.name} chan</span>\n\t\t\t\t{chat.messages.map(message => {\n\t\t\t\t\tif ((message.type === 'whisp' || message.type === 'message') && props.myProfile && !props.myProfile.muted.includes(message.id))\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t<div key={index++}>\n\t\t\t\t\t\t\t<button onClick={createMenu} data-id={message.id} data-name={message.name} type='button' data-bs-toggle='dropdown' className={`nav-link d-inline ${props.myProfile && props.myProfile.id === message.id ? 'text-danger' : 'text-primary'}`} disabled={props.myProfile && props.myProfile.id === message.id}>{props.myProfile && props.myProfile.id === message.id ? 'You' : message.name} {message.type === 'whisp' && props.myProfile && message.id === props.myProfile.id && ' to ' + message.target}</button> \n\t\t\t\t\t\t\t{' :'} <span style={{color : message.type === 'whisp' ? '#107553' : '#000000'}}> {message.text}</span>\n\t\t\t\t\t\t\t<ul className='dropdown-menu' style={{backgroundColor: '#D8D8D8'}}></ul>\n\t\t\t\t\t\t</div>)\n\t\t\t\t\tif (message.type === 'system' || message.type === 'admin')\n\t\t\t\t\t\treturn <div key={index++} style={{color : message.type === 'system' ? '#FF0000' : '#5E00FF'}}>{message.text}</div>\n\t\t\t\t\telse\n\t\t\t\t\t\treturn undefined\n\t\t\t\t})}\n\t\t\t</div>\n\t\t\t<div className='d-flex align-items-center justify-content-center my-2' hidden={props.chanName !== chat.name}>\n\t\t\t\t<button onClick={toBottom} type='button' className='nav-link' hidden={props.chanName !== chat.name}>\n\t\t\t\t\t<img src=\"/images/arrow-down-circle.svg\" alt=\"\" />\n\t\t\t\t</button>\n\t\t\t</div>\n        \t<hr className=\"mx-5 mt-0 mb-2\" hidden={props.chanName !== chat.name} />\n\t\t</>\n\t)\n}\n\nexport default Chat"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}